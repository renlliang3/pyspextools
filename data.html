
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>pyspextools.data: Data filtering and optimization functions &#8212; pyspextools 0.3.4 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pyspextools.model: Interfaces for SPEX models" href="user.html" />
    <link rel="prev" title="Importing OGIP spectra" href="ogip.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="user.html" title="pyspextools.model: Interfaces for SPEX models"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ogip.html" title="Importing OGIP spectra"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyspextools 0.3.4 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pyspextools-data-data-filtering-and-optimization-functions">
<h1>pyspextools.data: Data filtering and optimization functions<a class="headerlink" href="#pyspextools-data-data-filtering-and-optimization-functions" title="Permalink to this headline">¶</a></h1>
<p>Spectra and response matrices are not always delivered in their most optimal form. They, for example, contain
bad channels or channels with zero response. In addition, spectra and responses can be optimized for storage,
calculation speed and statistical accuracy. The pyspextools.data module contains functions to filter or optimize
spectra and response matrices with respect to their originals.</p>
<div class="section" id="filtering-for-bad-channels">
<h2>Filtering for bad channels<a class="headerlink" href="#filtering-for-bad-channels" title="Permalink to this headline">¶</a></h2>
<p>The clean_region function returns a region without bad channels and zero response bins. The function reads the
original region object from the function input and returns a cleaned region. The function call is quite simple:</p>
<dl class="function">
<dt id="pyspextools.data.clean_region">
<code class="sig-prename descclassname">pyspextools.data.</code><code class="sig-name descname">clean_region</code><span class="sig-paren">(</span><em class="sig-param">reg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyspextools/data/badchannels.html#clean_region"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspextools.data.clean_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove bad channels and channels with zero response from the region.</p>
</dd></dl>

<p>The function first checks whether the input object is indeed an instance of the Region class and that the spectrum
and response are loaded. Then masks are created for several arrays in the spectrum and response files:</p>
<blockquote>
<div><ul class="simple">
<li><p>Chanmask is a boolean array, based on the ‘used’ array from the spo file, which identifies which spectral channels
can be used or not. This logical value can be based on the Quality flag in the original OGIP spectrum. The channel
should be usable if the channel is good in both the source and background spectrum.</p></li>
<li><p>Respmask identifies zero response values in the response array. They are found by looping through the response groups
and through the channels (from ic1 to ic2, with a total of nc channels per group). If a channel has a zero response
every time, it is also marked bad in the chanmask array (previous bullet). Then the zero response element is masked
and the array indices (ic1, ic2 and nc) are modified to point to the correct response elements.</p></li>
<li><p>Groupmask masks response groups that have a zero response in total, so with no useful channels within the group.</p></li>
</ul>
</div></blockquote>
<p>When the masks are finished, they are applied to the input region, both to the spo and res component. The new
filtered region object is returned to the user. Such a call could look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filtered_region</span> <span class="o">=</span> <span class="n">clean_region</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pyspextools.data: Data filtering and optimization functions</a><ul>
<li><a class="reference internal" href="#filtering-for-bad-channels">Filtering for bad channels</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="ogip.html"
                        title="previous chapter">Importing OGIP spectra</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="user.html"
                        title="next chapter">pyspextools.model: Interfaces for SPEX models</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/data.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="user.html" title="pyspextools.model: Interfaces for SPEX models"
             >next</a> |</li>
        <li class="right" >
          <a href="ogip.html" title="Importing OGIP spectra"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyspextools 0.3.4 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018-2019, SRON Netherlands Institute for Space Research.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.0.
    </div>
  </body>
</html>